const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/prism-CoxOb6JW.js","assets/index-30M-oanY.js","assets/index-BLBdQAqu.css","assets/prism-tomorrow-Cg1sXqY3.css"])))=>i.map(i=>d[i]);
import{c as _,r,_ as b,j as e,C as P,D as R}from"./index-30M-oanY.js";/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],O=_("check",M);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],A=_("chevron-up",H);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],U=_("copy",F),k=l=>l.replace(/[<>:"/\\|?*]/g,"_").replace(/\s+/g,"_").replace(/_+/g,"_").replace(/^_+|_+$/g,"").slice(0,255),z=async l=>{try{return await navigator.clipboard.writeText(l),!0}catch{const a=document.createElement("textarea");a.value=l,document.body.appendChild(a),a.select();try{return document.execCommand("copy")}finally{document.body.removeChild(a)}}},B=(l,a,t="text/plain")=>{try{const u=new Blob([l],{type:t}),i=URL.createObjectURL(u),o=document.createElement("a");o.href=i,o.download=k(a),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o),setTimeout(()=>URL.revokeObjectURL(i),100)}catch(u){console.error("Failed to download file:",u)}},G=(l,a)=>{const t=setTimeout(l,a);return{clear:()=>clearTimeout(t)}},V=(l,a)=>{const[t,u]=r.useState(!1),i=r.useRef(new Map),o=r.useRef(null);return r.useEffect(()=>{let d=!0;return(async()=>{try{await b(()=>import("./prism-CoxOb6JW.js").then(h=>h.p),__vite__mapDeps([0,1,2])),await Promise.all([b(()=>Promise.resolve({}),__vite__mapDeps([3])),b(()=>Promise.resolve().then(()=>I),void 0)]),d&&u(!0)}catch(h){console.warn("Failed to load Prism.js:",h),d&&u(!0)}})(),()=>{d=!1}},[]),r.useEffect(()=>{if(!(!t||!a))return o.current&&clearTimeout(o.current),o.current=setTimeout(async()=>{try{const d=await b(()=>import("./prism-CoxOb6JW.js").then(c=>c.p),__vite__mapDeps([0,1,2]));l.forEach((c,h)=>{const x=i.current.get(`${h}`);if(x)try{const f=d.languages[c.language]||d.languages.plaintext;x.innerHTML=d.highlight(c.content,f,c.language)}catch(f){console.warn(`Failed to highlight ${c.language}:`,f),x.textContent=c.content}})}catch(d){console.warn("Failed to highlight code:",d)}},100),()=>{o.current&&clearTimeout(o.current)}},[t,l,a]),{prismLoaded:t,codeRefs:i}},y={javascript:{name:"JavaScript",ext:"js"},typescript:{name:"TypeScript",ext:"ts"},python:{name:"Python",ext:"py"},java:{name:"Java",ext:"java"},csharp:{name:"C#",ext:"cs"},cpp:{name:"C++",ext:"cpp"},c:{name:"C",ext:"c"},php:{name:"PHP",ext:"php"},ruby:{name:"Ruby",ext:"rb"},go:{name:"Go",ext:"go"},rust:{name:"Rust",ext:"rs"},swift:{name:"Swift",ext:"swift"},kotlin:{name:"Kotlin",ext:"kt"},scala:{name:"Scala",ext:"scala"},html:{name:"HTML",ext:"html"},css:{name:"CSS",ext:"css"},scss:{name:"SCSS",ext:"scss"},sass:{name:"Sass",ext:"sass"},less:{name:"Less",ext:"less"},json:{name:"JSON",ext:"json"},xml:{name:"XML",ext:"xml"},yaml:{name:"YAML",ext:"yml"},toml:{name:"TOML",ext:"toml"},sql:{name:"SQL",ext:"sql"},bash:{name:"Bash",ext:"sh"},powershell:{name:"PowerShell",ext:"ps1"},dockerfile:{name:"Dockerfile",ext:"dockerfile"},markdown:{name:"Markdown",ext:"md"},latex:{name:"LaTeX",ext:"tex"},plaintext:{name:"Plain Text",ext:"txt"},text:{name:"Text",ext:"txt"}},J=r.memo(({styles:l,content:a})=>{const t=a.split(`
`);return e.jsx("div",{className:`select-none pr-4 flex-shrink-0 ${l.code.lines}`,children:t.map((u,i)=>e.jsx("div",{className:"text-right leading-6 min-h-[1.5rem]",children:i+1},i))})}),q=({index:l,styles:a,codeData:t,onCopy:u,onLanguageChange:i})=>{const[o,d]=r.useState(null),[c,h]=r.useState(0),[x,f]=r.useState(t.defaultCollapsed),w=r.useRef(null),m=r.useMemo(()=>{var n;return(n=t.sections)!=null&&n.length?t.sections.map(({language:s,...p})=>({language:y[s]?s:"plaintext",...p})):t.content?[{language:y[t.language]?t.language:"plaintext",content:t.content,filename:t.name}]:[]},[t]),{prismLoaded:C,codeRefs:S}=V(m,!x),g=m[c],j=r.useCallback(n=>{var s;return((s=y[n])==null?void 0:s.name)||n},[]),T=r.useCallback(async n=>{const s=m[n];if(!s)return;await z(s.content)&&(d(`${n}`),w.current&&w.current.clear(),w.current=G(()=>d(null),2e3),u==null||u(s.content,s.language))},[m,u]),$=r.useCallback(n=>{var N;const s=m[n];if(!s)return;const p=((N=y[s.language])==null?void 0:N.ext)??"txt",E=s.filename?k(s.filename):`code-${l}-${n}.${p}`;B(s.content,E)},[m,l]),L=r.useCallback(n=>{n>=0&&n<m.length&&(h(n),i==null||i(m[n].language))},[m,i]);if(r.useEffect(()=>()=>{var n;return(n=w.current)==null?void 0:n.clear()},[]),!m.length)return e.jsx("div",{className:"mb-6 p-4 rounded",children:e.jsx("p",{children:"No code content provided"})});const v=m.length>1;return e.jsxs("div",{className:"relative mb-6 overflow-hidden rounded",children:[e.jsxs("div",{className:`flex items-center justify-between px-3 py-2 ${a.code.header}`,children:[e.jsx("div",{className:"flex items-center gap-2 min-w-0 flex-1 flex-wrap",children:v?e.jsxs(e.Fragment,{children:[t.name&&e.jsx("span",{className:"truncate",children:t.name}),e.jsx("div",{className:"flex items-center gap-1 flex-wrap",children:m.map((n,s)=>e.jsx("button",{onClick:()=>L(s),className:`flex justify-center items-center gap-1 py-1 px-2 text-xs rounded transition-colors cursor-pointer ${s===c?a.buttons.tabSmallActive:a.buttons.tabSmall}`,title:`Switch to ${j(n.language)}`,children:j(n.language)},s))})]}):e.jsx("span",{className:"truncate",children:t.name??g.filename??j(g.language)})}),e.jsxs("div",{className:"flex gap-1 items-center flex-shrink-0",children:[t.collapsible&&e.jsxs("button",{onClick:()=>f(!x),className:`flex justify-center items-center gap-1 py-1 px-2 text-xs rounded transition-colors cursor-pointer ${a.buttons.small}`,title:x?"Expand code block":"Collapse code block",children:[x?e.jsx(P,{className:"w-3 h-3"}):e.jsx(A,{className:"w-3 h-3"}),e.jsx("span",{className:"hidden sm:inline",children:x?"Show":"Hide"})]}),t.allowDownload&&e.jsxs("button",{onClick:()=>$(c),className:`flex justify-center items-center gap-1 py-1 px-2 text-xs rounded transition-colors cursor-pointer ${a.buttons.small}`,title:"Download code file",children:[e.jsx(R,{className:"w-3 h-3"}),e.jsx("span",{className:"hidden sm:inline",children:"Download"})]}),e.jsxs("button",{onClick:()=>T(c),className:`flex justify-center items-center gap-1 py-1 px-2 text-xs rounded transition-colors cursor-pointer ${a.buttons.small}`,title:"Copy code to clipboard",children:[o===`${c}`?e.jsx(O,{className:"w-3 h-3 text-green-500"}):e.jsx(U,{className:"w-3 h-3"}),e.jsx("span",{className:"hidden sm:inline",children:o===`${c}`?"Copied!":"Copy"})]})]})]}),e.jsxs("div",{className:"relative overflow-hidden transition-all duration-300 ease-in-out",style:{maxHeight:x?"0px":t.maxHeight,opacity:x?0:1},children:[e.jsx("pre",{className:`language-${g.language} !m-0 overflow-x-auto w-full text-sm ${t.wrapLines?"whitespace-pre-wrap":"whitespace-pre"}`,style:{maxHeight:t.maxHeight},children:e.jsxs("div",{className:"flex min-h-full",children:[t.showLineNumbers&&e.jsx(J,{styles:a,content:g.content}),e.jsx("div",{className:"flex-1 relative",children:m.map((n,s)=>e.jsx("code",{ref:p=>{p&&(S.current.set(`${s}`,p),C||(p.textContent=n.content))},className:`!language-${n.language} block !p-4 ${t.wrapLines?"break-words":""} ${s===c?"block":"hidden"}`,style:{minHeight:"1.5rem"}},s))})]})}),!v&&e.jsx("div",{className:`absolute top-2 right-2 px-2 py-1 rounded text-xs backdrop-blur-sm ${a.code.language}`,children:j(g.language)})]})]},l)},K=r.memo(q),I=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{q as CodeBlock,K as default};
