import{c as N,j as t,r as k,R as M}from"./index-xCLyj1-e.js";import{S as F,C as K}from"./search-wcC1AOSp.js";/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],T=N("chevron-right",_);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],V=N("file-text",U);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],z=N("folder",q),B=({styles:e,className:s=""})=>t.jsxs("div",{className:`text-xs text-gray-500 mt-2 flex flex-wrap gap-3 select-none ${s}`,children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("kbd",{className:`${e.componentsStyles.keyHints}`,children:"Esc"}),t.jsx("span",{className:`${e.textStyles.hints}`,children:"Unfocus filter"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("kbd",{className:`${e.componentsStyles.keyHints}`,children:"Ctrl"}),t.jsx("kbd",{className:`${e.componentsStyles.keyHints}`,children:"↑ or ↓"}),t.jsx("span",{className:`${e.textStyles.hints}`,children:"Navigate items"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("kbd",{className:`${e.componentsStyles.keyHints}`,children:"Enter"}),t.jsx("span",{className:`${e.textStyles.hints}`,children:"Select or toggle"})]})]}),D=(e,s,i,a)=>[a.componentsStyles.navigationRowBase,i?"text-sm":"text-base",e?a.componentsStyles.navigationRowActive:"",s&&!e?a.componentsStyles.navigationRowFocused:"",e?"":a.componentsStyles.navigationRowHover].join(" "),v=(e,s)=>(e==null?void 0:e.toLowerCase().includes(s))??!1,b=(e,s)=>{var i,a;return v(e.title,s)||(((i=e.docs)==null?void 0:i.some(c=>v(c.title,s)))??!1)||(((a=e.children)==null?void 0:a.some(c=>b(c,s)))??!1)},Z=(e,s,i,a)=>{const c=[],h=a.toLowerCase();s.filter(l=>v(l.title,h)).forEach(l=>c.push({type:"doc",id:l.id,item:l,depth:0,key:`doc-${l.id}`}));const o=(l,p)=>{var u,w;b(l,h)&&(c.push({type:"category",id:l.id,depth:p,key:`cat-${l.id}`}),i[l.id]&&((u=l.docs)==null||u.forEach(m=>{v(m.title,h)&&c.push({type:"doc",id:m.id,item:m,depth:p+1,key:`doc-${m.id}`})}),(w=l.children)==null||w.forEach(m=>o(m,p+1))))};return e.forEach(l=>o(l,0)),c},E=M.forwardRef(({doc:e,depth:s,active:i,focused:a,select:c,styles:h},o)=>t.jsxs("li",{ref:o,"data-key":`doc-${e.id}`,role:"treeitem","aria-selected":a,onClick:()=>c(e),className:D(i,a,s,h),children:[t.jsx(V,{className:"w-4 h-4 shrink-0"}),e.title]}));E.displayName="DocRow";const L=M.forwardRef(({node:e,depth:s,expanded:i,focused:a,toggle:c,styles:h},o)=>t.jsxs("button",{ref:o,"data-key":`cat-${e.id}`,role:"treeitem","aria-expanded":i,"aria-selected":a,onClick:()=>c(e.id),className:D(!1,a,s,h),style:{justifyContent:"space-between",width:"100%"},children:[t.jsxs("span",{className:"flex items-center gap-2",children:[t.jsx(z,{className:"w-4 h-4 shrink-0"}),e.title]}),i?t.jsx(K,{className:"w-4 h-4 shrink-0"}):t.jsx(T,{className:"w-4 h-4 shrink-0"})]}));L.displayName="CategoryRow";const A=({node:e,depth:s,open:i,toggle:a,filter:c,current:h,focusedKey:o,select:l,styles:p})=>{var f,y;if(!b(e,c))return null;const u=!!i[e.id],w=`cat-${e.id}`,m=o===w;return t.jsxs("div",{className:s?"ml-4 space-y-1":"space-y-1",children:[t.jsx(L,{ref:null,node:e,depth:s,expanded:u,focused:m,toggle:a,styles:p}),u&&!!((f=e.docs)!=null&&f.length)&&t.jsx("ul",{className:"ml-5 space-y-1",children:e.docs.map(x=>t.jsx(E,{ref:null,doc:x,depth:s+1,active:(h==null?void 0:h.id)===x.id,focused:o===`doc-${x.id}`,select:l,styles:p},x.id))}),u&&((y=e.children)==null?void 0:y.map(x=>t.jsx(A,{node:x,depth:s+1,open:i,toggle:a,filter:c,current:h,focusedKey:o,select:l,styles:p},x.id)))]})},X=({styles:e,tree:s,standaloneDocs:i=[],onSelect:a,selectedItem:c,isSearchOpen:h=!1})=>{var R;const[o,l]=k.useState({}),p=k.useCallback(n=>l(d=>({...d,[n]:!d[n]})),[]),[u,w]=k.useState(""),m=k.useRef(null),f=k.useMemo(()=>Z(s,i,o,u),[s,i,o,u]),[y,x]=k.useState(0),g=((R=f[y])==null?void 0:R.key)??null;k.useEffect(()=>{y>=f.length&&x((f.length,0))},[f.length,y]),k.useEffect(()=>{if(!g)return;const n=document.querySelector(`[data-key="${g}"]`);n==null||n.scrollIntoView({block:"nearest"})},[g]),k.useEffect(()=>{const n=d=>{var C,H;if(h)return;const j=document.activeElement,S=j&&["INPUT","TEXTAREA"].includes(j.tagName);if(d.key==="Escape"&&j===m.current){d.preventDefault(),(C=m.current)==null||C.blur();return}if(!(S&&j!==m.current))switch(d.key){case(d.ctrlKey&&"ArrowDown"):d.preventDefault(),x(r=>Math.min(f.length-1,r+1));break;case(d.ctrlKey&&"ArrowUp"):d.preventDefault(),x(r=>Math.max(0,r-1));break;case(d.ctrlKey&&"ArrowRight"):{const r=f[y];(r==null?void 0:r.type)==="category"&&!o[r.id]&&(d.preventDefault(),p(r.id));break}case(d.ctrlKey&&"ArrowLeft"):{const r=f[y];(r==null?void 0:r.type)==="category"&&o[r.id]&&(d.preventDefault(),p(r.id));break}case"Enter":{const r=f[y];if(!r)return;d.preventDefault(),r.type==="doc"?a(r.item):p(r.id);break}case"f":case"F":S||(d.preventDefault(),(H=m.current)==null||H.focus());break}};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[f,y,p,o,a,h]);const $=u.toLowerCase();return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"mb-3 relative",children:[t.jsx(F,{className:"absolute left-2.5 top-2.5 w-4 h-4 text-gray-400"}),t.jsx("input",{ref:m,type:"text",value:u,onChange:n=>w(n.target.value),placeholder:"Enter here to filter…",className:`${e.componentsStyles.input} w-full pl-8 pr-2 py-1.5 border`}),t.jsx("kbd",{className:`${e.componentsStyles.keyHints} absolute right-2.5 top-1/2 -translate-y-1/2`,children:"F"})]}),t.jsx(B,{styles:e,className:"mb-4"}),t.jsxs("nav",{role:"tree","aria-label":"Documentation navigation",className:"space-y-4",children:[i.length>0&&t.jsxs("section",{children:[t.jsx("h2",{className:"text-sm font-semibold text-gray-500 uppercase mb-2",children:"General"}),t.jsx("ul",{className:"space-y-1",children:i.filter(n=>n.title.toLowerCase().includes($)).map(n=>t.jsx(E,{ref:null,doc:n,depth:0,active:(c==null?void 0:c.id)===n.id,focused:g===`doc-${n.id}`,select:a,styles:e},n.id))})]}),s.map(n=>t.jsx(A,{node:n,depth:0,open:o,toggle:p,filter:$,current:c,focusedKey:g,select:a,styles:e},n.id))]})]})};export{X as default};
