const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/prism-BUuch9xI.js","assets/index-BAEqSM0S.js","assets/index-0ArXf9Pl.css","assets/prism-tomorrow-Cg1sXqY3.css","assets/prism-languages.generated-BST53H5j.js"])))=>i.map(i=>d[i]);
import{c as N,r as a,_ as b,j as e,C as H}from"./index-BAEqSM0S.js";/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],A=N("check",O);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],U=N("chevron-up",F);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],B=N("copy",z);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],V=N("download",G),q=u=>u.replace(/[<>:"/\\|?*]/g,"_").replace(/\s+/g,"_").replace(/_+/g,"_").replace(/^_+|_+$/g,"").slice(0,255),v={javascript:{name:"JavaScript",ext:"js"},typescript:{name:"TypeScript",ext:"ts"},python:{name:"Python",ext:"py"},java:{name:"Java",ext:"java"},csharp:{name:"C#",ext:"cs"},cpp:{name:"C++",ext:"cpp"},c:{name:"C",ext:"c"},php:{name:"PHP",ext:"php"},ruby:{name:"Ruby",ext:"rb"},go:{name:"Go",ext:"go"},rust:{name:"Rust",ext:"rs"},swift:{name:"Swift",ext:"swift"},kotlin:{name:"Kotlin",ext:"kt"},scala:{name:"Scala",ext:"scala"},html:{name:"HTML",ext:"html"},css:{name:"CSS",ext:"css"},scss:{name:"SCSS",ext:"scss"},sass:{name:"Sass",ext:"sass"},less:{name:"Less",ext:"less"},json:{name:"JSON",ext:"json"},xml:{name:"XML",ext:"xml"},yaml:{name:"YAML",ext:"yml"},toml:{name:"TOML",ext:"toml"},sql:{name:"SQL",ext:"sql"},bash:{name:"Bash",ext:"sh"},powershell:{name:"PowerShell",ext:"ps1"},dockerfile:{name:"Dockerfile",ext:"dockerfile"},markdown:{name:"Markdown",ext:"md"},latex:{name:"LaTeX",ext:"tex"},plaintext:{name:"Plain Text",ext:"txt"},text:{name:"Text",ext:"txt"}},J=(u,c)=>{const[t,p]=a.useState(!1),d=a.useRef(new Map),h=a.useRef(null);return a.useEffect(()=>{let r=!0;return(async()=>{try{await b(()=>import("./prism-BUuch9xI.js").then(x=>x.p),__vite__mapDeps([0,1,2])),await Promise.all([b(()=>Promise.resolve({}),__vite__mapDeps([3])),b(()=>import("./prism-languages.generated-BST53H5j.js").then(x=>x.p),__vite__mapDeps([4,1,2]))]),r&&p(!0)}catch(x){console.warn("Failed to load Prism.js:",x),r&&p(!0)}})(),()=>{r=!1}},[]),a.useEffect(()=>{if(!(!t||!c))return h.current&&clearTimeout(h.current),h.current=setTimeout(async()=>{try{const r=await b(()=>import("./prism-BUuch9xI.js").then(l=>l.p),__vite__mapDeps([0,1,2]));u.forEach((l,x)=>{const m=d.current.get(`${x}`);if(m)try{const y=r.languages[l.language]||r.languages.plaintext;m.innerHTML=r.highlight(l.content,y,l.language)}catch(y){console.warn(`Failed to highlight ${l.language}:`,y),m.textContent=l.content}})}catch(r){console.warn("Failed to highlight code:",r)}},100),()=>{h.current&&clearTimeout(h.current)}},[t,u,c]),{prismLoaded:t,codeRefs:d}},$=a.memo(({styles:u,content:c})=>{const t=c.split(`
`);return e.jsx("div",{className:`select-none pr-4 flex-shrink-0 ${u.code.lines}`,children:t.map((p,d)=>e.jsx("div",{className:"text-right leading-6 min-h-[1.5rem]",children:d+1},d))})});$.displayName="LineNumbers";const X=({index:u,styles:c,codeData:t,onCopy:p,onLanguageChange:d})=>{const[h,r]=a.useState(null),[l,x]=a.useState(0),[m,y]=a.useState(t.defaultCollapsed),f=a.useRef(null),o=a.useMemo(()=>{var s;return(s=t.sections)!=null&&s.length?t.sections.map(({language:n,...i})=>({language:v[n]?n:"plaintext",...i})):t.content?[{language:v[t.language]?t.language:"plaintext",content:t.content,filename:t.name}]:[]},[t.sections,t.content,t.language,t.name]),{prismLoaded:T,codeRefs:S}=J(o,!m),w=o[l],j=a.useCallback(s=>{var n;return((n=v[s])==null?void 0:n.name)||s},[]),L=a.useCallback(async s=>{const n=o[s];if(n)try{await navigator.clipboard.writeText(n.content),r(`${s}`),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>r(null),2e3),p==null||p(n.content,n.language)}catch{const i=document.createElement("textarea");i.value=n.content,document.body.appendChild(i),i.select();try{document.execCommand("copy"),r(`${s}`),f.current=setTimeout(()=>r(null),2e3)}finally{document.body.removeChild(i)}}},[o,p]),E=a.useCallback(s=>{var i;const n=o[s];if(n)try{const _=new Blob([n.content],{type:"text/plain"}),C=URL.createObjectURL(_),g=document.createElement("a"),P=((i=v[n.language])==null?void 0:i.ext)??"txt",M=n.filename?q(n.filename):`code-${u}-${s}.${P}`;g.href=C,g.download=M,g.style.display="none",document.body.appendChild(g),g.click(),document.body.removeChild(g),setTimeout(()=>URL.revokeObjectURL(C),100)}catch(_){console.error("Failed to download file:",_)}},[o,u]),R=a.useCallback(s=>{s>=0&&s<o.length&&(x(s),d==null||d(o[s].language))},[o,d]);if(a.useEffect(()=>()=>{f.current&&clearTimeout(f.current)},[]),!o.length)return e.jsx("div",{className:"mb-6 p-4 rounded",children:e.jsx("p",{children:"No code content provided"})});const k=o.length>1;return e.jsxs("div",{className:"relative mb-6 overflow-hidden rounded",children:[e.jsxs("div",{className:`flex items-center justify-between px-3 py-2 ${c.code.header}`,children:[e.jsx("div",{className:"flex items-center gap-2 min-w-0 flex-1 flex-wrap",children:k?e.jsxs(e.Fragment,{children:[t.name&&e.jsx("span",{className:"truncate",children:t.name}),e.jsx("div",{className:"flex items-center gap-1 flex-wrap",children:o.map((s,n)=>e.jsx("button",{onClick:()=>R(n),className:`flex justify-center items-center gap-1 py-1 px-2 text-xs rounded transition-colors cursor-pointer ${n===l?c.buttons.tabSmallActive:c.buttons.tabSmall}`,title:`Switch to ${j(s.language)}`,children:j(s.language)},n))})]}):e.jsx("span",{className:"truncate",children:t.name??w.filename??j(w.language)})}),e.jsxs("div",{className:"flex gap-1 items-center flex-shrink-0",children:[t.collapsible&&e.jsxs("button",{onClick:()=>y(!m),className:`flex justify-center items-center gap-1 py-1 px-2 text-xs rounded transition-colors cursor-pointer ${c.buttons.small}`,title:m?"Expand code block":"Collapse code block",children:[m?e.jsx(H,{className:"w-3 h-3"}):e.jsx(U,{className:"w-3 h-3"}),e.jsx("span",{className:"hidden sm:inline",children:m?"Show":"Hide"})]}),t.allowDownload&&e.jsxs("button",{onClick:()=>E(l),className:`flex justify-center items-center gap-1 py-1 px-2 text-xs rounded transition-colors cursor-pointer ${c.buttons.small}`,title:"Download code file",children:[e.jsx(V,{className:"w-3 h-3"}),e.jsx("span",{className:"hidden sm:inline",children:"Download"})]}),e.jsxs("button",{onClick:()=>L(l),className:`flex justify-center items-center gap-1 py-1 px-2 text-xs rounded transition-colors cursor-pointer ${c.buttons.small}`,title:"Copy code to clipboard",children:[h===`${l}`?e.jsx(A,{className:"w-3 h-3 text-green-500"}):e.jsx(B,{className:"w-3 h-3"}),e.jsx("span",{className:"hidden sm:inline",children:h===`${l}`?"Copied!":"Copy"})]})]})]}),e.jsxs("div",{className:"relative overflow-hidden transition-all duration-300 ease-in-out",style:{maxHeight:m?"0px":t.maxHeight,opacity:m?0:1},children:[e.jsx("pre",{className:`language-${w.language} !m-0 overflow-x-auto w-full text-sm ${t.wrapLines?"whitespace-pre-wrap":"whitespace-pre"}`,style:{maxHeight:t.maxHeight},children:e.jsxs("div",{className:"flex min-h-full",children:[t.showLineNumbers&&e.jsx($,{styles:c,content:w.content}),e.jsx("div",{className:"flex-1 relative",children:o.map((s,n)=>e.jsx("code",{ref:i=>{i&&(S.current.set(`${n}`,i),T||(i.textContent=s.content))},className:`!language-${s.language} block !p-4 ${t.wrapLines?"break-words":""} ${n===l?"block":"hidden"}`,style:{minHeight:"1.5rem"}},n))})]})}),!k&&e.jsx("div",{className:`absolute top-2 right-2 px-2 py-1 rounded text-xs backdrop-blur-sm ${c.code.language}`,children:j(w.language)})]})]},u)},Q=a.memo(X);export{Q as default};
