const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/prism-P5wiGQ3S.js","assets/index-Cp27bux7.js","assets/index-0ArXf9Pl.css","assets/prism-tomorrow-Cg1sXqY3.css","assets/prism-languages.generated-B4DAblQk.js"])))=>i.map(i=>d[i]);
import{c as v,r,_ as j,j as e,C as P}from"./index-Cp27bux7.js";/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],H=v("check",M);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],A=v("chevron-up",O);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],U=v("copy",F);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],B=v("download",z),k=l=>l.replace(/[<>:"/\\|?*]/g,"_").replace(/\s+/g,"_").replace(/_+/g,"_").replace(/^_+|_+$/g,"").slice(0,255),G=async l=>{try{return await navigator.clipboard.writeText(l),!0}catch{const a=document.createElement("textarea");a.value=l,document.body.appendChild(a),a.select();try{return document.execCommand("copy")}finally{document.body.removeChild(a)}}},V=(l,a,t="text/plain")=>{try{const u=new Blob([l],{type:t}),i=URL.createObjectURL(u),o=document.createElement("a");o.href=i,o.download=k(a),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o),setTimeout(()=>URL.revokeObjectURL(i),100)}catch(u){console.error("Failed to download file:",u)}},q=(l,a)=>{const t=setTimeout(l,a);return{clear:()=>clearTimeout(t)}},b={javascript:{name:"JavaScript",ext:"js"},typescript:{name:"TypeScript",ext:"ts"},python:{name:"Python",ext:"py"},java:{name:"Java",ext:"java"},csharp:{name:"C#",ext:"cs"},cpp:{name:"C++",ext:"cpp"},c:{name:"C",ext:"c"},php:{name:"PHP",ext:"php"},ruby:{name:"Ruby",ext:"rb"},go:{name:"Go",ext:"go"},rust:{name:"Rust",ext:"rs"},swift:{name:"Swift",ext:"swift"},kotlin:{name:"Kotlin",ext:"kt"},scala:{name:"Scala",ext:"scala"},html:{name:"HTML",ext:"html"},css:{name:"CSS",ext:"css"},scss:{name:"SCSS",ext:"scss"},sass:{name:"Sass",ext:"sass"},less:{name:"Less",ext:"less"},json:{name:"JSON",ext:"json"},xml:{name:"XML",ext:"xml"},yaml:{name:"YAML",ext:"yml"},toml:{name:"TOML",ext:"toml"},sql:{name:"SQL",ext:"sql"},bash:{name:"Bash",ext:"sh"},powershell:{name:"PowerShell",ext:"ps1"},dockerfile:{name:"Dockerfile",ext:"dockerfile"},markdown:{name:"Markdown",ext:"md"},latex:{name:"LaTeX",ext:"tex"},plaintext:{name:"Plain Text",ext:"txt"},text:{name:"Text",ext:"txt"}},J=(l,a)=>{const[t,u]=r.useState(!1),i=r.useRef(new Map),o=r.useRef(null);return r.useEffect(()=>{let d=!0;return(async()=>{try{await j(()=>import("./prism-P5wiGQ3S.js").then(p=>p.p),__vite__mapDeps([0,1,2])),await Promise.all([j(()=>Promise.resolve({}),__vite__mapDeps([3])),j(()=>import("./prism-languages.generated-B4DAblQk.js").then(p=>p.p),__vite__mapDeps([4,1,2]))]),d&&u(!0)}catch(p){console.warn("Failed to load Prism.js:",p),d&&u(!0)}})(),()=>{d=!1}},[]),r.useEffect(()=>{if(!(!t||!a))return o.current&&clearTimeout(o.current),o.current=setTimeout(async()=>{try{const d=await j(()=>import("./prism-P5wiGQ3S.js").then(c=>c.p),__vite__mapDeps([0,1,2]));l.forEach((c,p)=>{const x=i.current.get(`${p}`);if(x)try{const f=d.languages[c.language]||d.languages.plaintext;x.innerHTML=d.highlight(c.content,f,c.language)}catch(f){console.warn(`Failed to highlight ${c.language}:`,f),x.textContent=c.content}})}catch(d){console.warn("Failed to highlight code:",d)}},100),()=>{o.current&&clearTimeout(o.current)}},[t,l,a]),{prismLoaded:t,codeRefs:i}},C=r.memo(({styles:l,content:a})=>{const t=a.split(`
`);return e.jsx("div",{className:`select-none pr-4 flex-shrink-0 ${l.code.lines}`,children:t.map((u,i)=>e.jsx("div",{className:"text-right leading-6 min-h-[1.5rem]",children:i+1},i))})});C.displayName="LineNumbers";const I=({index:l,styles:a,codeData:t,onCopy:u,onLanguageChange:i})=>{const[o,d]=r.useState(null),[c,p]=r.useState(0),[x,f]=r.useState(t.defaultCollapsed),y=r.useRef(null),m=r.useMemo(()=>{var n;return(n=t.sections)!=null&&n.length?t.sections.map(({language:s,...h})=>({language:b[s]?s:"plaintext",...h})):t.content?[{language:b[t.language]?t.language:"plaintext",content:t.content,filename:t.name}]:[]},[t]),{prismLoaded:$,codeRefs:T}=J(m,!x),g=m[c],w=r.useCallback(n=>{var s;return((s=b[n])==null?void 0:s.name)||n},[]),S=r.useCallback(async n=>{const s=m[n];if(!s)return;await G(s.content)&&(d(`${n}`),y.current&&y.current.clear(),y.current=q(()=>d(null),2e3),u==null||u(s.content,s.language))},[m,u]),L=r.useCallback(n=>{var _;const s=m[n];if(!s)return;const h=((_=b[s.language])==null?void 0:_.ext)??"txt",R=s.filename?k(s.filename):`code-${l}-${n}.${h}`;V(s.content,R)},[m,l]),E=r.useCallback(n=>{n>=0&&n<m.length&&(p(n),i==null||i(m[n].language))},[m,i]);if(r.useEffect(()=>()=>{var n;return(n=y.current)==null?void 0:n.clear()},[]),!m.length)return e.jsx("div",{className:"mb-6 p-4 rounded",children:e.jsx("p",{children:"No code content provided"})});const N=m.length>1;return e.jsxs("div",{className:"relative mb-6 overflow-hidden rounded",children:[e.jsxs("div",{className:`flex items-center justify-between px-3 py-2 ${a.code.header}`,children:[e.jsx("div",{className:"flex items-center gap-2 min-w-0 flex-1 flex-wrap",children:N?e.jsxs(e.Fragment,{children:[t.name&&e.jsx("span",{className:"truncate",children:t.name}),e.jsx("div",{className:"flex items-center gap-1 flex-wrap",children:m.map((n,s)=>e.jsx("button",{onClick:()=>E(s),className:`flex justify-center items-center gap-1 py-1 px-2 text-xs rounded transition-colors cursor-pointer ${s===c?a.buttons.tabSmallActive:a.buttons.tabSmall}`,title:`Switch to ${w(n.language)}`,children:w(n.language)},s))})]}):e.jsx("span",{className:"truncate",children:t.name??g.filename??w(g.language)})}),e.jsxs("div",{className:"flex gap-1 items-center flex-shrink-0",children:[t.collapsible&&e.jsxs("button",{onClick:()=>f(!x),className:`flex justify-center items-center gap-1 py-1 px-2 text-xs rounded transition-colors cursor-pointer ${a.buttons.small}`,title:x?"Expand code block":"Collapse code block",children:[x?e.jsx(P,{className:"w-3 h-3"}):e.jsx(A,{className:"w-3 h-3"}),e.jsx("span",{className:"hidden sm:inline",children:x?"Show":"Hide"})]}),t.allowDownload&&e.jsxs("button",{onClick:()=>L(c),className:`flex justify-center items-center gap-1 py-1 px-2 text-xs rounded transition-colors cursor-pointer ${a.buttons.small}`,title:"Download code file",children:[e.jsx(B,{className:"w-3 h-3"}),e.jsx("span",{className:"hidden sm:inline",children:"Download"})]}),e.jsxs("button",{onClick:()=>S(c),className:`flex justify-center items-center gap-1 py-1 px-2 text-xs rounded transition-colors cursor-pointer ${a.buttons.small}`,title:"Copy code to clipboard",children:[o===`${c}`?e.jsx(H,{className:"w-3 h-3 text-green-500"}):e.jsx(U,{className:"w-3 h-3"}),e.jsx("span",{className:"hidden sm:inline",children:o===`${c}`?"Copied!":"Copy"})]})]})]}),e.jsxs("div",{className:"relative overflow-hidden transition-all duration-300 ease-in-out",style:{maxHeight:x?"0px":t.maxHeight,opacity:x?0:1},children:[e.jsx("pre",{className:`language-${g.language} !m-0 overflow-x-auto w-full text-sm ${t.wrapLines?"whitespace-pre-wrap":"whitespace-pre"}`,style:{maxHeight:t.maxHeight},children:e.jsxs("div",{className:"flex min-h-full",children:[t.showLineNumbers&&e.jsx(C,{styles:a,content:g.content}),e.jsx("div",{className:"flex-1 relative",children:m.map((n,s)=>e.jsx("code",{ref:h=>{h&&(T.current.set(`${s}`,h),$||(h.textContent=n.content))},className:`!language-${n.language} block !p-4 ${t.wrapLines?"break-words":""} ${s===c?"block":"hidden"}`,style:{minHeight:"1.5rem"}},s))})]})}),!N&&e.jsx("div",{className:`absolute top-2 right-2 px-2 py-1 rounded text-xs backdrop-blur-sm ${a.code.language}`,children:w(g.language)})]})]},l)},K=r.memo(I);export{K as default};
