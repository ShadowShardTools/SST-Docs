const c=t=>t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),u=t=>c(t).replace(/`/g,"&#96;"),h=t=>t.trim(),m=t=>t.startsWith("/")||t.startsWith("#")||t.startsWith("./")||t.startsWith("../"),g=t=>["http:","https:","mailto:","tel:"].includes(t),d=t=>{const e=h(t);if(!e)return"";if(m(e))return e;try{const i=new URL(e);return g(i.protocol)?e:""}catch{return""}},$=t=>t.replace(/(?:<br>\s*)+$/g,""),E=(t,e)=>{const i=document.createElement("div");i.innerHTML=t;const l=s=>{if(s.nodeType===Node.TEXT_NODE)return c(s.textContent??"").replace(/\r?\n/g,"<br>");if(s.nodeType!==Node.ELEMENT_NODE)return"";const a=s,r=a.tagName.toUpperCase(),n=Array.from(a.childNodes).map(l).join("");if(r==="BR")return"<br>";if(r==="B"||r==="STRONG")return`<strong>${n}</strong>`;if(r==="I"||r==="EM")return`<em>${n}</em>`;if(r==="A"){const o=d(a.getAttribute("href")??"");if(!o)return n;const p=o.startsWith("http://")||o.startsWith("https://")?' target="_blank" rel="noopener noreferrer"':"",f=e?.hyperlink?.link?` class="${e.hyperlink.link}"`:"";return`<a href="${u(o)}"${p}${f}>${n}</a>`}return r==="DIV"||r==="P"?`${n}<br>`:r==="UL"||r==="OL"?`<${r.toLowerCase()}>${n}</${r.toLowerCase()}>`:r==="LI"?`<li>${n}</li>`:n};return $(Array.from(i.childNodes).map(l).join(""))},T=(t,e)=>t?typeof document>"u"?c(t).replace(/\r?\n/g,"<br>"):E(t,e):"";export{T as s};
