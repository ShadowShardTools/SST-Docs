import{c as p,r as u,u as j,j as o}from"./index-CqbpBgXV.js";import{r as N}from"./mediaPath-DATeMewo.js";const C=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],M=p("pause",C);const E=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],T=p("play",E);const L=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]],S=p("volume-1",L);const z=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],A=p("volume-2",z);const _=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],V=p("volume-x",_),v=e=>{if(isNaN(e)||e<0)return"0:00";const t=Math.floor(e/60),n=Math.floor(e%60);return`${t}:${n.toString().padStart(2,"0")}`};function W(e){const t=u.useRef(null),[n,s]=u.useState(!1),[k,f]=u.useState(0),[g,d]=u.useState(0),[c,h]=u.useState(1);u.useEffect(()=>{const a=t.current;if(!a)return;const r=()=>f(a.duration),i=()=>d(a.currentTime),l=()=>s(!1);return a.addEventListener("loadedmetadata",r),a.addEventListener("timeupdate",i),a.addEventListener("ended",l),()=>{a.removeEventListener("loadedmetadata",r),a.removeEventListener("timeupdate",i),a.removeEventListener("ended",l)}},[]),u.useEffect(()=>{const a=t.current;if(!a)return;const r=()=>h(a.volume);return h(a.volume),a.addEventListener("volumechange",r),()=>{a.removeEventListener("volumechange",r)}},[]),u.useEffect(()=>{t.current&&(t.current.load(),s(!1),d(0),f(0))},[e]),u.useEffect(()=>{t.current&&(t.current.volume=c)},[c]);const x=u.useCallback(async()=>{const a=t.current;if(a)try{n?(a.pause(),s(!1)):(await a.play(),s(!0))}catch(r){console.error("Cannot play audio:",r),s(!1)}},[n]),m=u.useCallback(a=>{const r=t.current;if(!r)return;const i=Number(a.target.value);r.currentTime=i,d(i)},[]),y=u.useCallback(a=>{const r=t.current;if(!r)return;const i=Number(a.target.value),l=Math.min(1,Math.max(0,i));r.volume=l,h(l)},[]);return{audioRef:t,isPlaying:n,duration:k,current:g,togglePlay:x,handleSeek:m,volume:c,handleVolumeChange:y}}const q=(e,t="audio/mpeg")=>{if(!e)return t;const n=e.split("?")[0]?.toLowerCase()??"";return n.endsWith(".mp3")?"audio/mpeg":n.endsWith(".ogg")?"audio/ogg":n.endsWith(".wav")?"audio/wav":n.endsWith(".m4a")?"audio/mp4":n.endsWith(".flac")?"audio/flac":n.endsWith(".webm")?"audio/webm":t},H=({styles:e,audioData:t})=>{const[n]=j(),s=t?N(t.src):"",k=t.mimeType||q(t.src),{audioRef:f,isPlaying:g,duration:d,current:c,togglePlay:h,handleSeek:x,volume:m,handleVolumeChange:y}=W(s),a=n==="dark",r=m===0?V:m<.5?S:A,i=(a?e.audioPlayer.sliderTrackColorDark??e.audioPlayer.sliderTrackColor:e.audioPlayer.sliderTrackColor)??"rgba(148, 163, 184, 0.35)",l=(a?e.audioPlayer.sliderFillColorDark??e.audioPlayer.sliderFillColor:e.audioPlayer.sliderFillColor)??"rgba(41, 37, 36, 0.9)",b=d>0?Math.min(100,Math.max(0,c/d*100)):0,w=Math.min(100,Math.max(0,m*100)),P={background:`linear-gradient(to right, ${l} 0%, ${l} ${w}%, ${i} ${w}%, ${i} 100%)`},$={background:`linear-gradient(to right, ${l} 0%, ${l} ${b}%, ${i} ${b}%, ${i} 100%)`};return o.jsxs("div",{className:"mb-6",children:[o.jsxs("audio",{ref:f,src:s,preload:"metadata",children:[o.jsx("source",{src:s,type:k}),"Your browser does not support the audio element."]}),o.jsxs("div",{className:`flex flex-wrap md:flex-nowrap items-center gap-3 rounded-md px-4 py-3 ${e.audioPlayer.container}`,children:[o.jsx("button",{onClick:h,className:`p-2 rounded-full cursor-pointer ${e.audioPlayer.playButton}`,"aria-label":g?"Pause audio":"Play audio",children:g?o.jsx(M,{className:"w-5 h-5"}):o.jsx(T,{className:"w-5 h-5"})}),o.jsx("span",{className:`${e.audioPlayer.time} w-12 select-none text-center`,children:v(c)}),o.jsx("input",{type:"range",min:0,max:d||0,step:.1,value:c,onChange:x,className:`flex-1 min-w-[160px] h-1 rounded-lg appearance-none cursor-pointer ${e.audioPlayer.slider}
            [&::-webkit-slider-thumb]:appearance-none
            [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:w-3
            [&::-webkit-slider-thumb]:rounded-full
            [&::-moz-range-thumb]:h-3 [&::-moz-range-thumb]:w-3
            [&::-moz-range-thumb]:rounded-full 
            ${e.audioPlayer.sliderThumb}`,"aria-label":"Seek within audio",style:$}),o.jsx("span",{className:`${e.audioPlayer.time} w-12 select-none text-center`,children:v(d)}),o.jsxs("div",{className:"flex items-center gap-2 w-28 shrink-0",children:[o.jsx(r,{className:`w-4 h-4 ${e.audioPlayer.time}`}),o.jsx("input",{type:"range",min:0,max:1,step:.01,value:m,onChange:y,"aria-label":"Adjust volume",className:`w-full h-1 rounded-lg appearance-none cursor-pointer ${e.audioPlayer.slider}
              [&::-webkit-slider-thumb]:appearance-none
              [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:w-3
              [&::-webkit-slider-thumb]:rounded-full
              [&::-moz-range-thumb]:h-3 [&::-moz-range-thumb]:w-3
              [&::-moz-range-thumb]:rounded-full 
              ${e.audioPlayer.sliderThumb}`,style:P})]})]}),t.caption&&o.jsx("p",{className:`${e.text.caption} text-center`,children:t.caption})]})};export{H as AudioBlock,H as default};
