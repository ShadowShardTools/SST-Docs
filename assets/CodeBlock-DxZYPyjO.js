const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/prism-CgBkkihj.js","assets/index-CK5Adyi0.js","assets/index-DAjqJRkl.css","assets/prism-tomorrow-Cg1sXqY3.css","assets/prism-languages.generated-DMt0FvCg.js"])))=>i.map(i=>d[i]);
import{c as _,r as a,j as e,C as H,_ as k}from"./index-CK5Adyi0.js";/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],A=_("check",O);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],U=_("chevron-up",F);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],B=_("copy",z);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],V=_("download",G),N={javascript:{name:"JavaScript",ext:"js"},typescript:{name:"TypeScript",ext:"ts"},python:{name:"Python",ext:"py"},java:{name:"Java",ext:"java"},csharp:{name:"C#",ext:"cs"},cpp:{name:"C++",ext:"cpp"},c:{name:"C",ext:"c"},php:{name:"PHP",ext:"php"},ruby:{name:"Ruby",ext:"rb"},go:{name:"Go",ext:"go"},rust:{name:"Rust",ext:"rs"},swift:{name:"Swift",ext:"swift"},kotlin:{name:"Kotlin",ext:"kt"},scala:{name:"Scala",ext:"scala"},html:{name:"HTML",ext:"html"},css:{name:"CSS",ext:"css"},scss:{name:"SCSS",ext:"scss"},sass:{name:"Sass",ext:"sass"},less:{name:"Less",ext:"less"},json:{name:"JSON",ext:"json"},xml:{name:"XML",ext:"xml"},yaml:{name:"YAML",ext:"yml"},toml:{name:"TOML",ext:"toml"},sql:{name:"SQL",ext:"sql"},bash:{name:"Bash",ext:"sh"},powershell:{name:"PowerShell",ext:"ps1"},dockerfile:{name:"Dockerfile",ext:"dockerfile"},markdown:{name:"Markdown",ext:"md"},latex:{name:"LaTeX",ext:"tex"},plaintext:{name:"Plain Text",ext:"txt"},text:{name:"Text",ext:"txt"}},$=a.memo(({content:m})=>{const c=m.split(`
`);return e.jsx("div",{className:"select-none pr-4 text-sm text-gray-500 border-r border-gray-300 dark:border-gray-600 flex-shrink-0",children:c.map((t,d)=>e.jsx("div",{className:"text-right leading-6 min-h-[1.5rem]",children:d+1},d))})});$.displayName="LineNumbers";const q=m=>m.replace(/[^\w\-_.]/g,"_"),J=(m,c)=>{const[t,d]=a.useState(!1),g=a.useRef(new Map),p=a.useRef(null);return a.useEffect(()=>{let l=!0;return(async()=>{try{await k(()=>import("./prism-CgBkkihj.js").then(x=>x.p),__vite__mapDeps([0,1,2])),await Promise.all([k(()=>Promise.resolve({}),__vite__mapDeps([3])),k(()=>import("./prism-languages.generated-DMt0FvCg.js").then(x=>x.p),__vite__mapDeps([4,1,2]))]),l&&d(!0)}catch(x){console.warn("Failed to load Prism.js:",x),l&&d(!0)}})(),()=>{l=!1}},[]),a.useEffect(()=>{if(!(!t||!c))return p.current&&clearTimeout(p.current),p.current=setTimeout(async()=>{try{const l=await k(()=>import("./prism-CgBkkihj.js").then(r=>r.p),__vite__mapDeps([0,1,2]));m.forEach((r,x)=>{const i=g.current.get(`${x}`);if(i)try{const b=l.languages[r.language]||l.languages.plaintext;i.innerHTML=l.highlight(r.content,b,r.language)}catch(b){console.warn(`Failed to highlight ${r.language}:`,b),i.textContent=r.content}})}catch(l){console.warn("Failed to highlight code:",l)}},100),()=>{p.current&&clearTimeout(p.current)}},[t,m,c]),{prismLoaded:t,codeRefs:g}},X=({index:m,styles:c,codeData:t,onCopy:d,onLanguageChange:g})=>{const[p,l]=a.useState(null),[r,x]=a.useState(0),[i,b]=a.useState(t.defaultCollapsed),f=a.useRef(null),o=a.useMemo(()=>{var s;return(s=t.sections)!=null&&s.length?t.sections.map(({language:n,...u})=>({language:N[n]?n:"plaintext",...u})):t.content?[{language:N[t.language]?t.language:"plaintext",content:t.content,filename:t.name}]:[]},[t.sections,t.content,t.language,t.name]),{prismLoaded:T,codeRefs:S}=J(o,!i),w=o[r],j=a.useCallback(s=>{var n;return((n=N[s])==null?void 0:n.name)||s},[]),L=a.useCallback(async s=>{const n=o[s];if(n)try{await navigator.clipboard.writeText(n.content),l(`${s}`),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>l(null),2e3),d==null||d(n.content,n.language)}catch(u){console.error("Failed to copy to clipboard:",u);const h=document.createElement("textarea");h.value=n.content,document.body.appendChild(h),h.select();try{document.execCommand("copy"),l(`${s}`),f.current=setTimeout(()=>l(null),2e3)}catch(v){console.error("Fallback copy failed:",v)}finally{document.body.removeChild(h)}}},[o,d]),E=a.useCallback(s=>{var u;const n=o[s];if(n)try{const h=new Blob([n.content],{type:"text/plain"}),v=URL.createObjectURL(h),y=document.createElement("a"),P=((u=N[n.language])==null?void 0:u.ext)??"txt",M=n.filename?q(n.filename):`code-${m}-${s}.${P}`;y.href=v,y.download=M,y.style.display="none",document.body.appendChild(y),y.click(),document.body.removeChild(y),setTimeout(()=>URL.revokeObjectURL(v),100)}catch(h){console.error("Failed to download file:",h)}},[o,m]),R=a.useCallback(s=>{s>=0&&s<o.length&&(x(s),g==null||g(o[s].language))},[o,g]);if(a.useEffect(()=>()=>{f.current&&clearTimeout(f.current)},[]),!o.length)return e.jsx("div",{className:"mb-6 p-4 border rounded text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-800",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-sm",children:"No code content provided"})})});const C=o.length>1;return e.jsxs("div",{className:"relative mb-6 overflow-hidden rounded",children:[e.jsxs("div",{className:`flex items-center justify-between px-3 py-2 ${c.code.header}`,children:[e.jsx("div",{className:"flex items-center gap-2 min-w-0 flex-1 flex-wrap",children:C?e.jsxs(e.Fragment,{children:[t.name&&e.jsx("span",{className:"truncate",children:t.name}),e.jsx("div",{className:"flex items-center gap-1 flex-wrap",children:o.map((s,n)=>e.jsx("button",{onClick:()=>R(n),className:`flex justify-center items-center gap-1 py-1 px-2 text-xs rounded transition-colors cursor-pointer ${n===r?c.buttons.tabSmallActive:c.buttons.tabSmall}`,title:`Switch to ${j(s.language)}`,children:j(s.language)},n))})]}):e.jsx("span",{className:"truncate",children:t.name??w.filename??j(w.language)})}),e.jsxs("div",{className:"flex gap-1 items-center flex-shrink-0",children:[t.collapsible&&e.jsxs("button",{onClick:()=>b(!i),className:`flex justify-center items-center gap-1 py-1 px-2 text-xs rounded transition-colors cursor-pointer ${c.buttons.small}`,title:i?"Expand code block":"Collapse code block",children:[i?e.jsx(H,{className:"w-3 h-3"}):e.jsx(U,{className:"w-3 h-3"}),e.jsx("span",{className:"hidden sm:inline",children:i?"Show":"Hide"})]}),t.allowDownload&&e.jsxs("button",{onClick:()=>E(r),className:`flex justify-center items-center gap-1 py-1 px-2 text-xs rounded transition-colors cursor-pointer ${c.buttons.small}`,title:"Download code file",children:[e.jsx(V,{className:"w-3 h-3"}),e.jsx("span",{className:"hidden sm:inline",children:"Download"})]}),e.jsxs("button",{onClick:()=>L(r),className:`flex justify-center items-center gap-1 py-1 px-2 text-xs rounded transition-colors cursor-pointer ${c.buttons.small}`,title:"Copy code to clipboard",children:[p===`${r}`?e.jsx(A,{className:"w-3 h-3 text-green-500"}):e.jsx(B,{className:"w-3 h-3"}),e.jsx("span",{className:"hidden sm:inline",children:p===`${r}`?"Copied!":"Copy"})]})]})]}),e.jsxs("div",{className:`relative overflow-hidden transition-all duration-300 ease-in-out ${i?"border-t-0":"border-t border-gray-200 dark:border-gray-700"}`,style:{maxHeight:i?"0px":t.maxHeight,opacity:i?0:1},children:[e.jsx("pre",{className:`language-${w.language} !m-0 overflow-x-auto w-full text-sm ${t.wrapLines?"whitespace-pre-wrap":"whitespace-pre"}`,style:{maxHeight:t.maxHeight},children:e.jsxs("div",{className:"flex min-h-full",children:[t.showLineNumbers&&e.jsx($,{content:w.content}),e.jsx("div",{className:"flex-1 relative",children:o.map((s,n)=>e.jsx("code",{ref:u=>{u&&(S.current.set(`${n}`,u),T||(u.textContent=s.content))},className:`!language-${s.language} block !p-4 ${t.wrapLines?"break-words":""} ${n===r?"block":"hidden"}`,style:{minHeight:"1.5rem"}},n))})]})}),!C&&e.jsx("div",{className:`absolute top-2 right-2 px-2 py-1 rounded text-xs backdrop-blur-sm ${c.code.language}`,children:j(w.language)})]})]},m)},Q=a.memo(X);export{Q as default};
