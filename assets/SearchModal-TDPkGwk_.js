import{r as p,j as e}from"./index-xCLyj1-e.js";const S=(t,c)=>t.replace(new RegExp(`(${c})`,"ig"),'<mark class="bg-yellow-200">$1</mark>'),$=({styles:t,isOpen:c,onClose:i,searchTerm:d,onSearchChange:w,results:a,onSelect:h})=>{const[m,x]=p.useState(0),u=p.useRef(null);return p.useEffect(()=>{c?setTimeout(()=>{var s;return(s=u.current)==null?void 0:s.focus()},100):x(0)},[c]),p.useEffect(()=>{const s=l=>{if(c)switch(l.key){case"Escape":l.preventDefault(),i();break;case"ArrowDown":l.preventDefault(),x(r=>Math.min(r+1,a.length-1));break;case"ArrowUp":l.preventDefault(),x(r=>Math.max(r-1,0));break;case"Enter":l.preventDefault(),a[m]&&(h(a[m]),i());break}};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[c,m,a,i,h]),p.useEffect(()=>{x(s=>Math.min(s,Math.max(0,a.length-1)))},[a.length]),c?e.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-start justify-center pt-24 px-4",onClick:i,children:e.jsxs("div",{className:`w-full max-w-2xl rounded-lg shadow-lg overflow-hidden border ${t.componentsStyles.searchModalBorders}`,onClick:s=>s.stopPropagation(),children:[e.jsx("div",{className:`flex items-center border-b px-4 py-2 ${t.componentsStyles.searchModalHeader} ${t.componentsStyles.searchModalBorders}`,children:e.jsx("input",{ref:u,type:"text",value:d,onChange:s=>{w(s.target.value),x(0)},placeholder:"Search documentation...",className:"flex-1 px-3 py-2 text-sm focus:outline-none"})}),e.jsx("div",{className:`max-h-96 overflow-y-auto ${t.componentsStyles.searchModalResultBackground}`,children:d?a.length===0?e.jsx("p",{className:"text-gray-500 text-sm text-center py-6",children:"No results found"}):e.jsx("ul",{children:a.map((s,l)=>{var g,j;const r=d.toLowerCase(),o=s.content.find(n=>{var y;return["description","quote"].includes(n.type)||n.type.startsWith("title")?n.content.toLowerCase().includes(r):n.type==="list"?(y=n.listItems)==null?void 0:y.some(N=>N.toLowerCase().includes(r)):n.type==="code"?n.content.toLowerCase().includes(r):!1}),f=(o==null?void 0:o.type)==="list"?(g=o.listItems)==null?void 0:g.find(n=>n.toLowerCase().includes(r)):o==null?void 0:o.content;return e.jsxs("li",{onClick:()=>{h(s),i()},className:`px-4 py-3 cursor-pointer ${m===l?t.componentsStyles.searchModalSelectedItem:t.componentsStyles.searchModalItem}`,children:[e.jsx("div",{className:`${t.textStyles.searchModalItemHeaderText}`,dangerouslySetInnerHTML:{__html:S(s.title,d)}}),f&&e.jsx("p",{className:`${t.textStyles.searchModalItemFoundSectionText}`,dangerouslySetInnerHTML:{__html:S(f,d)}}),((j=s.tags)==null?void 0:j.length)&&e.jsx("div",{className:`${t.textStyles.searchModalItemTags}`,children:s.tags.join(", ")})]},s.id)})}):e.jsx("p",{className:"text-gray-400 text-sm text-center py-6",children:"Start typing to search..."})}),e.jsxs("div",{className:`border-t px-4 py-2 flex justify-between items-center ${t.componentsStyles.searchModalFooter} ${t.componentsStyles.searchModalBorders}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:`${t.componentsStyles.keyHints}`,children:"↑"}),e.jsx("kbd",{className:`${t.componentsStyles.keyHints}`,children:"↓"}),e.jsx("span",{className:`${t.textStyles.hints}`,children:"to navigate"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:`${t.componentsStyles.keyHints}`,children:"Enter"}),e.jsx("span",{className:`${t.textStyles.hints}`,children:"to select"})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:`${t.componentsStyles.keyHints}`,children:"Esc"}),e.jsx("span",{className:`${t.textStyles.hints}`,children:"to close"})]})]})]})}):null};export{$ as default};
